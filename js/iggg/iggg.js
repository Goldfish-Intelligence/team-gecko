(()=>{var ae=Object.defineProperty;var v=(t,e)=>{for(var l in e)ae(t,l,{get:e[l],enumerable:!0})};var H={};v(H,{displayComponents:()=>me,draw:()=>R,explain:()=>pe,groups:()=>fe,highlightLocation:()=>he,key:()=>P,locationFromCoordinates:()=>de,name:()=>J,regex:()=>ie});var w="#689F38",k="#1B5E20",x="#FFA000",L="#E65100",z="rgba(102, 187, 106, 0.2)",T="#004D40",g="#00695C",N="rgba(255, 235, 59, 0.25)",B="rgba(253, 216, 53, 0.8)",S='bold 0.8em "Skranji", sans-serif';var J="Mathebau",P="mb",ie=/^MB((-1|[0-4])(\.)?([0-3])?)?$/i,fe={floor:2,corner:4},a=133,i=98,$=i+24,W={"-1":[],0:[],1:["1","2","3"],2:["1","2","3"],3:["1","2","3"],4:[]},V={0:{x:-32,y:28},1:{x:-28,y:32},2:{x:-32,y:28},3:{x:-28,y:32}},E=1,u=E;function ue(t){t.strokeRect(1,1,a-2,i-2),u>0&&t.strokeRect(36,22,a-72,i-44),u===0&&t.fillText("FSM",4,i-5)}function Q(t,e){let l=t.getTransform();t.translate(a/2,i/2),t.rotate(parseInt(e,10)*(Math.PI/2)),t.translate(-(a/2),-(i/2)),t.translate(V[e].x,V[e].y),t.beginPath(),t.moveTo(a/2,i/2),t.lineTo(a/2+9,i/2),t.lineTo(a/2+9,i/2+8),t.lineTo(a/2-8,i/2+8),t.lineTo(a/2-8,i/2-9),t.lineTo(a/2,i/2-9),t.closePath(),t.fill(),t.stroke(),t.setTransform(l)}function ce(t){let e;u<0?e=`${Math.abs(u)}.UG`:u===0?e="EG":e=`${u}.OG`,t.fillText(e,a/2,i/2+2),u<4&&(t.beginPath(),t.moveTo(a/2-5,i/2-11),t.lineTo(a/2+5,i/2-11),t.lineTo(a/2,i/2-19),t.closePath(),t.fill(),t.stroke()),u>-1&&(t.beginPath(),t.moveTo(a/2-5,i/2+11),t.lineTo(a/2+5,i/2+11),t.lineTo(a/2,i/2+19),t.closePath(),t.fill(),t.stroke())}var h;function R(t){h=Math.max(Math.min(window.innerWidth*.8/$,5),1);let e=t.getContext("2d");e.canvas.width=h*a,e.canvas.height=h*$,e.scale(h,h),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S;for(let l=-1;l<=4;l+=1)ue(e,l);e.lineWidth=1,e.strokeStyle=k,e.fillStyle=w;for(let l of W[u])Q(e,l);e.textAlign="center",e.textBaseline="middle",ce(e),e.fillStyle=g,e.fillText("Campus",a/2,$-13)}function j(t,e,l,r){return Math.sqrt((l-t)**2+(r-e)**2)}function de(t,e){let l=j(t/h,e/h,a/2,i/2-15),r=j(t/h,e/h,a/2,i/2+15);if(l<8&&u<4)return{floor:u+1,corner:null};if(r<8&&u>-1)return{floor:u-1,corner:null};let n=1/0,s=null;for(let o of W[u]){let f=(["0","1"].includes(o)?-1:1)*32,d=(["1","2"].includes(o)?-1:1)*28,p=j(t/h,e/h,a/2+f,i/2+d);p<n&&(n=p,s=o)}return n<20?{floor:u,corner:s}:{floor:u,corner:null}}function he(t,e){if(R(t),e===null)return;u=e.floor===null?E:parseInt(e.floor,10),R(t);let l=t.getContext("2d");if(l.fillStyle=x,l.strokeStyle=L,e.corner!==null){if(!W[u].includes(e.corner))return;Q(l,e.corner)}}function me(t){if(t===null)return null;let e=["MB",t.floor===null?E:t.floor];return t.corner!==null&&e.push(".",t.corner),e}function pe(t){if(t===null)return null;let e=t.floor===null?E:parseInt(t.floor,10),l;e<0?l=`${Math.abs(e)}. Untergeschoss`:e===0?l="Erdgeschoss":l=`${e}. Obergeschoss`;let r=t.corner===null?null:`Lernecke Nr. ${t.corner}`;return[J,l,null,r]}var G={};v(G,{displayComponents:()=>Le,draw:()=>_,explain:()=>Te,groups:()=>be,highlightLocation:()=>xe,key:()=>D,locationFromCoordinates:()=>ke,name:()=>M,regex:()=>ge});var M="Mensa \xFCber [k\u0153ri]werk",D="muek",ge=/^M(Ã¼|ue)K((1(,2)?|2(,3)?|3(,4)?|4(,5)?|5(,6)?|6(,7)?|7(,8)?|8(,9)?|9(,10)?|10(,11)?|11(,12)?|12)([ai]?))?$/i,be={angle:3,ring:15},F=222,C=186,I={1:{i:[],a:[]},"1,2":{i:[],a:[]},2:{i:[[146,44,!0,!0],[156,44,!1,!0]],a:[]},"2,3":{i:[[146,58,!0,!0],[156,58,!1,!0]],a:[]},3:{i:[[146,72,!0,!0],[156,72,!1,!0]],a:[[186,65,!1,!0],[194,65,!1,!0],[202,65,!1,!0],[210,65,!1,!0],[186,78,!1,!0],[194,78,!1,!0],[202,78,!1,!0],[210,78,!1,!0]]},"3,4":{i:[[146,86,!0,!0],[156,86,!1,!0]],a:[[186,91,!1,!0],[194,91,!1,!0],[202,91,!1,!0],[210,91,!1,!0],[186,104,!1,!0],[194,104,!1,!0],[202,104,!1,!0],[210,104,!1,!0]]},4:{i:[[146,100,!0,!0],[156,100,!1,!0]],a:[[186,117,!1,!0],[194,117,!1,!0],[202,117,!1,!0],[210,117,!1,!0],[186,130,!1,!0],[194,130,!1,!0],[202,130,!1,!0],[210,130,!1,!0]]},"4,5":{i:[],a:[[186,143,!1,!0],[194,143,!1,!0],[202,143,!1,!0],[210,143,!1,!0],[186,156,!1,!0],[194,156,!1,!0],[202,156,!1,!0],[210,156,!1,!0],[186,169,!1,!0],[194,169,!1,!0],[202,169,!1,!0],[210,169,!1,!0]]},5:{i:[[138,110,!1,!1],[138,118,!0,!1]],a:[[166,150,!1,!1],[166,158,!1,!1],[166,166,!1,!1],[166,174,!1,!1],[153,150,!1,!1],[153,158,!1,!1],[153,166,!1,!1],[153,174,!1,!1]]},"5,6":{i:[[126,110,!1,!1],[126,118,!0,!1]],a:[[140,150,!1,!1],[140,158,!1,!1],[140,166,!1,!1],[140,174,!1,!1],[127,150,!1,!1],[127,158,!1,!1],[127,166,!1,!1],[127,174,!1,!1]]},6:{i:[[114,110,!1,!1],[114,118,!0,!1],[102,110,!1,!1],[102,118,!0,!1]],a:[[114,150,!1,!1],[114,158,!1,!1],[114,166,!1,!1],[114,174,!1,!1],[101,150,!1,!1],[101,158,!1,!1],[101,166,!1,!1],[101,174,!1,!1]]},"6,7":{i:[[90,110,!1,!1],[90,118,!0,!1]],a:[[88,150,!1,!1],[88,158,!1,!1],[88,166,!1,!1],[88,174,!1,!1]]},7:{i:[[78,110,!1,!1],[78,118,!0,!1]],a:[[57,156,!1,!1],[57,164,!1,!1],[57,172,!0,!1]]},"7,8":{i:[],a:[[4,172,!1,!0],[12,172,!1,!0],[20,172,!0,!0],[4,158,!0,!0],[14,158,!1,!0],[22,158,!1,!0],[4,144,!0,!0],[14,144,!1,!0],[22,144,!1,!0]]},8:{i:[[58,99,!1,!0],[66,99,!0,!0]],a:[[4,130,!0,!0],[14,130,!1,!0],[22,130,!1,!0],[30,130,!0,!0]]},"8,9":{i:[[58,86,!1,!0],[66,86,!0,!0]],a:[]},9:{i:[[58,73,!1,!0],[66,73,!0,!0]],a:[[4,82,!1,!0],[12,82,!1,!0],[20,82,!0,!0],[30,82,!1,!0],[4,69,!1,!0],[12,69,!1,!0],[20,69,!1,!0],[28,69,!1,!0]]},"9,10":{i:[[58,60,!1,!0],[66,60,!0,!0]],a:[[4,56,!1,!0],[12,56,!1,!0],[20,56,!1,!0],[28,56,!1,!0],[4,43,!1,!0],[12,43,!1,!0],[20,43,!1,!0],[28,43,!1,!0]]},10:{i:[[58,47,!1,!0],[66,47,!0,!0]],a:[[4,30,!1,!0],[12,30,!1,!0],[20,30,!1,!0],[28,30,!1,!0],[4,17,!1,!0],[12,17,!1,!0],[20,17,!1,!0],[28,17,!1,!0],[4,4,!0,!0],[14,4,!1,!0],[22,4,!0,!0]]},"10,11":{i:[],a:[]},11:{i:[],a:[]},"11,12":{i:[],a:[]},12:{i:[],a:[]},"12,1":{i:[],a:[]}},b;function Z(t,e){let l=e[2]?10:8,r=e[3]?l:6,n=e[3]?6:l;t.fillRect(e[0],e[1],r,n),t.strokeRect(e[0],e[1],r,n)}function ye(t,e,l){let s=Math.max(F,C);t.fillStyle=z,t.moveTo(111,75),t.beginPath(),t.arc(111,75,s,e-Math.PI/2,l-Math.PI/2,!1),t.lineTo(111,75),t.fill(),t.closePath()}function _(t){b=Math.max(Math.min(window.innerWidth*.9/F,3),2);let e=t.getContext("2d");e.canvas.width=b*F,e.canvas.height=b*C,e.scale(b,b),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S,e.strokeRect(2,2,F-4,C-4),e.strokeRect(78,42,66,66),e.fillText("L1",30,20),e.fillText("L2",80,20),e.fillText("MS",180,20),e.lineWidth=1,e.fillStyle=w,e.strokeStyle=k;for(let l of Object.values(I))for(let r of Object.values(l))for(let n of r)Z(e,n)}function we(t,e,l,r,n,s){let o=Math.max(l-t,0,t-(l+n)),f=Math.max(r-e,0,e-(r+s));return Math.sqrt(o*o+f*f)}function ke(t,e){let l=1/0,r=null;for(let[n,s]of Object.entries(I))for(let[o,f]of Object.entries(s))for(let d of f){let p=we(t/b,e/b,d[0],d[1],d[2]?10:8,d[2]?6:8);p<l&&(l=p,r={angle:n,ring:o})}return l<20?r:{angle:null,ring:null}}function xe(t,e){if(_(t),e===null)return;let l=t.getContext("2d");if(e.angle===null)return;let r=2*Math.PI/24,n=parseInt(e.angle.split(",")[0],10)%12*2;e.angle.includes(",")&&(n+=1),ye(l,(n-.5)*r,(n+1-.5)*r),l.fillStyle=x,l.strokeStyle=L;let s=[];if(e.ring!==null)s.push(...I[e.angle][e.ring.toLowerCase()]);else if(e.angle!==null)for(let o of Object.values(I[e.angle]))s.push(...o);for(let o of s)Z(l,o)}function Le(t){return t===null?null:["M\xFCK",t.angle,t.ring===null?null:t.ring.toLowerCase()]}function Te(t){if(t===null)return null;if(t.angle===null)return[M,null,null];let e=t.angle.split(","),l=`${e.length===2?`zwischen ${e[0]} und ${e[1]}`:t.angle} Uhr`;if(t.ring===null)return[M,l,null];let r=t.ring.toLowerCase()==="i"?"innerer Ring":"\xE4u\xDFerer Ring";return[M,l,r]}var U={};v(U,{displayComponents:()=>Be,draw:()=>ne,explain:()=>Oe,groups:()=>Ee,highlightLocation:()=>ve,key:()=>K,locationFromCoordinates:()=>Ie,name:()=>te,regex:()=>Se});var te="Mensa Gro\xDFer Speisesaal",K="ms",Se=/^MS(([1-9])([a-d]))?$/i,Ee={row:2,column:3},ee=154,A=334,c={};function Me(){let t=["8","8","7","7","7","6","6","6","5","5","5","4","4","3","3","3","2","2"],e=["a","b","c","d"];for(let l=0;l<18;l+=1){let r=51+13*l+1;for(let n=0;n<4;n+=1){let s=t[l],o=e[n];if(c[s]===void 0&&(c[s]={}),c[s][o]===void 0&&(c[s][o]=[]),!(l===11&&n<3))switch(n){case 0:c[s][o].push([18,r,!1],[26,r,!1]);break;case 1:c[s][o].push([50,r,!0],[62,r,!0]);break;case 2:c[s][o].push([90,r,!0],[102,r,!0]);break;case 3:c[s][o].push([130,r,!1],[138,r,!0]);break;default:break}}}}Me();var y;function le(t,e){let l=e[2]?12:8,r=6;t.fillRect(e[0],e[1],l,r),t.strokeRect(e[0],e[1],l,r)}function re(t,e,l){let r=4+36*l+12+2,n=4+3*12*(8-e)+12+2;t.fillRect(r,n,10,10)}function ne(t){y=Math.max(Math.min(window.innerHeight*.8/A,3),2);let e=t.getContext("2d");e.canvas.width=y*ee,e.canvas.height=y*A,e.scale(y,y),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S,e.strokeRect(2,2,ee-4,A-4),e.fillText("L3",15,20),e.fillText("L4",50,20),e.fillText("L5",85,20),e.fillText("L6",120,20),e.fillText("SB",40,325),e.fillText("M\xFCK",107,320),e.lineWidth=1,e.fillStyle=w,e.strokeStyle=k;for(let l of Object.values(c))for(let r of Object.values(l))for(let n of r)le(e,n);e.fillStyle=N,e.lineWidth=0;for(let l=0;l<9;l+=1)for(let r=0;r<4;r+=1)re(e,l,r)}function Fe(t,e,l,r,n,s){let o=Math.max(l-t,0,t-(l+n)),f=Math.max(r-e,0,e-(r+s));return Math.sqrt(o*o+f*f)}function Ie(t,e){let l=1/0,r=null;for(let[n,s]of Object.entries(c))for(let[o,f]of Object.entries(s))for(let d of f){let p=Fe(t/y,e/y,d[0],d[1],d[2]?12:8,6);p<l&&(l=p,r={row:n,column:o})}return l<20?r:{row:null,column:null}}function ve(t,e){if(ne(t),e===null)return;let l=t.getContext("2d");if(e.row===null||e.column===null)return;l.fillStyle=x,l.strokeStyle=L;let r=[];if(e.row!==null&&e.column!==null)r.push(...c[e.row][e.column.toLowerCase()]);else if(e.row!==null)for(let n of Object.keys(c[e.row]))r.push(...c[e.row][n]);else if(e.column!==null)for(let n of Object.keys(c))r.push(...c[n][e.column.toLowerCase()]);for(let n of r)le(l,n);l.shadowColor=B,l.shadowBlur=15,l.fillStyle=B,re(l,parseInt(e.row,10)-1,e.column.toLowerCase().charCodeAt(0)-97)}function Be(t){return t===null?null:["MS",t.row,t.column]}function Oe(t){if(t===null)return null;let e=t.column===null?null:`Lampenspalte ${t.column.toUpperCase()}`,l=t.row===null?null:`Lampenreihe ${t.row}`;return[te,l,e]}var m={};m[P]=H;m[D]=G;m[K]=U;function X(t,e){let l=document.getElementById("location-code"),r=document.getElementById("location-code-explanation"),n=document.getElementById("share-btn");if(t===null){window.location.hash="",l.innerHTML="\u2026",r.innerHTML="&nbsp;",n.style.display="none";return}n.style.display="inline-block",l.innerHTML="",r.innerHTML="";for(let[s,o]of t.entries()){let f=document.createElement("span");if(f.textContent=o,f.title=e[s],l.appendChild(f),e[s]!==null){let d=document.createElement("span");d.textContent=e[s],r.appendChild(d)}}window.location.hash=l.innerText.toLowerCase()}function Y(t){function e(n){document.getElementById(`map-${n}`).style.display="none",document.getElementById(`map-selector-${n}`).classList.remove("selected")}if(t===null){X(null,null);for(let n of Object.values(m))e(n.key);return}for(let n of Object.values(m))n.key!==t.key&&e(n.key);let l=document.getElementById(`map-${t.key}`);l.style.display="block";let r=m[t.key];r.highlightLocation(l,t.location),X(r.displayComponents(t.location),r.explain(t.location)),document.getElementById(`map-selector-${t.key}`).classList.add("selected")}function q(t){for(let[e,l]of Object.entries(m)){let r=l.regex.exec(t.replace(/\s+/g,""));if(r===null)continue;let n={key:e,location:{}};for(let[s,o]of Object.entries(l.groups))n.location[s]=r[o]?r[o]:null;return n}return null}function $e(){let t=document.getElementById("canvas-wrapper"),e=document.getElementById("map-selector");for(let[l,r]of Object.entries(m)){let n=document.createElement("canvas");n.id=`map-${l}`,t.appendChild(n);let s=document.createElement("span");s.textContent=r.name,s.id=`map-selector-${l}`,s.addEventListener("click",()=>{Y(q(l)),document.getElementById("location-code").scrollIntoView()}),e.appendChild(s),r.draw(n),n.addEventListener("click",o=>{let f=r.locationFromCoordinates(o.offsetX,o.offsetY);r.highlightLocation(n,f),X(r.displayComponents(f),r.explain(f))})}}function oe(){let t=window.decodeURIComponent(window.location.hash.slice(1));Y(q(t))}function je(){window.addEventListener("hashchange",()=>{oe()})}function Re(){let t=document.getElementById("location-code");t.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),t.blur())}),t.addEventListener("focus",()=>{t.innerText==="\u2026"&&(t.innerText="")}),t.addEventListener("blur",()=>{Y(q(t.innerText)),t.innerText.trim()===""&&(t.innerHTML="\u2026")})}function Pe(){document.getElementById("share-btn").addEventListener("click",()=>{let t=document.getElementById("location-code").innerText,e=window.location.href,l={title:"IGGG",text:t,url:e};navigator.share&&navigator.canShare(l)?navigator.share(l):navigator.clipboard.writeText(`${t} \u2014 ${e}`)})}function se(){$e(),oe(),je(),Re(),Pe(),window.addEventListener("resize",()=>{for(let[t,e]of Object.entries(m)){let l=document.getElementById(`map-${t}`);e.draw(l)}})}document.readyState!=="loading"?se():window.addEventListener("DOMContentLoaded",()=>{se()});})();

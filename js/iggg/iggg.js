(()=>{var ie=Object.defineProperty;var v=(t,e)=>{for(var l in e)ie(t,l,{get:e[l],enumerable:!0})};var G={};v(G,{displayComponents:()=>pe,draw:()=>P,explain:()=>ge,groups:()=>ue,highlightLocation:()=>me,key:()=>W,locationFromCoordinates:()=>he,name:()=>Q,regex:()=>fe});var w="#689F38",k="#1B5E20",x="#FFA000",L="#E65100",N="rgba(102, 187, 106, 0.2)",T="#004D40",g="#00695C",V="rgba(255, 235, 59, 0.25)",O="rgba(253, 216, 53, 0.8)",S='bold 0.8em "Skranji", sans-serif';var Q="Mathebau",W="mb",fe=/^MB((-1|[0-4])(\.)?([0-3])?)?$/i,ue={floor:2,corner:4},a=133,i=98,j=i+24,C={"-1":[],0:[],1:["1","2","3"],2:["1","2","3"],3:["1","2","3"],4:[]},J={0:{x:-32,y:28},1:{x:-28,y:32},2:{x:-32,y:28},3:{x:-28,y:32}},M=1,f=M;function ce(t){t.strokeRect(1,1,a-2,i-2),f>0&&t.strokeRect(36,22,a-72,i-44),f===0&&t.fillText("FSM",4,i-5)}function Z(t,e){let l=t.getTransform();t.translate(a/2,i/2),t.rotate(parseInt(e,10)*(Math.PI/2)),t.translate(-(a/2),-(i/2)),t.translate(J[e].x,J[e].y),t.beginPath(),t.moveTo(a/2,i/2),t.lineTo(a/2+9,i/2),t.lineTo(a/2+9,i/2+8),t.lineTo(a/2-8,i/2+8),t.lineTo(a/2-8,i/2-9),t.lineTo(a/2,i/2-9),t.closePath(),t.fill(),t.stroke(),t.setTransform(l)}function de(t){let e;f<0?e=`${Math.abs(f)}.UG`:f===0?e="EG":e=`${f}.OG`,t.fillText(e,a/2,i/2+2),f<4&&(t.beginPath(),t.moveTo(a/2-5,i/2-11),t.lineTo(a/2+5,i/2-11),t.lineTo(a/2,i/2-19),t.closePath(),t.fill(),t.stroke()),f>-1&&(t.beginPath(),t.moveTo(a/2-5,i/2+11),t.lineTo(a/2+5,i/2+11),t.lineTo(a/2,i/2+19),t.closePath(),t.fill(),t.stroke())}var m;function P(t){m=Math.max(Math.min(window.innerWidth*.8/j,5),1);let e=t.getContext("2d");e.canvas.width=m*a,e.canvas.height=m*j,e.scale(m,m),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S;for(let l=-1;l<=4;l+=1)ce(e,l);e.lineWidth=1,e.strokeStyle=k,e.fillStyle=w;for(let l of C[f])Z(e,l);e.textAlign="center",e.textBaseline="middle",de(e),e.fillStyle=g,e.fillText("Campus",a/2,j-13)}function R(t,e,l,n){return Math.sqrt((l-t)**2+(n-e)**2)}function he(t,e){let l=R(t/m,e/m,a/2,i/2-15),n=R(t/m,e/m,a/2,i/2+15);if(l<8&&f<4)return{floor:f+1,corner:null};if(n<8&&f>-1)return{floor:f-1,corner:null};let r=1/0,o=null;for(let s of C[f]){let u=(["0","1"].includes(s)?-1:1)*32,d=(["1","2"].includes(s)?-1:1)*28,h=R(t/m,e/m,a/2+u,i/2+d);h<r&&(r=h,o=s)}return r<20?{floor:f,corner:o}:{floor:f,corner:null}}function me(t,e){if(P(t),e===null)return;f=e.floor===null?M:parseInt(e.floor,10),P(t);let l=t.getContext("2d");if(l.fillStyle=x,l.strokeStyle=L,e.corner!==null){if(!C[f].includes(e.corner))return;Z(l,e.corner)}}function pe(t){if(t===null)return null;let e=["MB",t.floor===null?M:t.floor];return t.corner!==null&&e.push(".",t.corner),e}function ge(t){if(t===null)return null;let e=t.floor===null?M:parseInt(t.floor,10),l;e<0?l=`${Math.abs(e)}. Untergeschoss`:e===0?l="Erdgeschoss":l=`${e}. Obergeschoss`;let n=t.corner===null?null:`Lernecke Nr. ${t.corner}`;return[Q,l,null,n]}var A={};v(A,{displayComponents:()=>Te,draw:()=>ee,explain:()=>Se,groups:()=>be,highlightLocation:()=>Le,key:()=>D,locationFromCoordinates:()=>xe,name:()=>F,regex:()=>ye});var F="Mensa \xFCber [k\u0153ri]werk",D="muek",ye=/^M(Ã¼|ue)K((1(,2)?|2(,3)?|3(,4)?|4(,5)?|5(,6)?|6(,7)?|7(,8)?|8(,9)?|9(,10)?|10(,11)?|11(,12)?|12)([ai]?))?$/i,be={angle:3,ring:15},I=222,H=186,B={1:{i:[],a:[]},"1,2":{i:[],a:[]},2:{i:[[146,44,!0,!0],[156,44,!1,!0]],a:[]},"2,3":{i:[[146,58,!0,!0],[156,58,!1,!0]],a:[]},3:{i:[[146,72,!0,!0],[156,72,!1,!0]],a:[[186,65,!1,!0],[194,65,!1,!0],[202,65,!1,!0],[210,65,!1,!0],[186,78,!1,!0],[194,78,!1,!0],[202,78,!1,!0],[210,78,!1,!0]]},"3,4":{i:[[146,86,!0,!0],[156,86,!1,!0]],a:[[186,91,!1,!0],[194,91,!1,!0],[202,91,!1,!0],[210,91,!1,!0],[186,104,!1,!0],[194,104,!1,!0],[202,104,!1,!0],[210,104,!1,!0]]},4:{i:[[146,100,!0,!0],[156,100,!1,!0]],a:[[186,117,!1,!0],[194,117,!1,!0],[202,117,!1,!0],[210,117,!1,!0],[186,130,!1,!0],[194,130,!1,!0],[202,130,!1,!0],[210,130,!1,!0]]},"4,5":{i:[],a:[[186,143,!1,!0],[194,143,!1,!0],[202,143,!1,!0],[210,143,!1,!0],[186,156,!1,!0],[194,156,!1,!0],[202,156,!1,!0],[210,156,!1,!0],[186,169,!1,!0],[194,169,!1,!0],[202,169,!1,!0],[210,169,!1,!0]]},5:{i:[[138,110,!1,!1],[138,118,!0,!1]],a:[[166,150,!1,!1],[166,158,!1,!1],[166,166,!1,!1],[166,174,!1,!1],[153,150,!1,!1],[153,158,!1,!1],[153,166,!1,!1],[153,174,!1,!1]]},"5,6":{i:[[126,110,!1,!1],[126,118,!0,!1]],a:[[140,150,!1,!1],[140,158,!1,!1],[140,166,!1,!1],[140,174,!1,!1],[127,150,!1,!1],[127,158,!1,!1],[127,166,!1,!1],[127,174,!1,!1]]},6:{i:[[114,110,!1,!1],[114,118,!0,!1],[102,110,!1,!1],[102,118,!0,!1]],a:[[114,150,!1,!1],[114,158,!1,!1],[114,166,!1,!1],[114,174,!1,!1],[101,150,!1,!1],[101,158,!1,!1],[101,166,!1,!1],[101,174,!1,!1]]},"6,7":{i:[[90,110,!1,!1],[90,118,!0,!1]],a:[[88,150,!1,!1],[88,158,!1,!1],[88,166,!1,!1],[88,174,!1,!1]]},7:{i:[[78,110,!1,!1],[78,118,!0,!1]],a:[[57,156,!1,!1],[57,164,!1,!1],[57,172,!0,!1]]},"7,8":{i:[],a:[[4,172,!1,!0],[12,172,!1,!0],[20,172,!0,!0],[4,158,!0,!0],[14,158,!1,!0],[22,158,!1,!0],[4,144,!0,!0],[14,144,!1,!0],[22,144,!1,!0]]},8:{i:[[58,99,!1,!0],[66,99,!0,!0]],a:[[4,130,!0,!0],[14,130,!1,!0],[22,130,!1,!0],[30,130,!0,!0]]},"8,9":{i:[[58,86,!1,!0],[66,86,!0,!0]],a:[]},9:{i:[[58,73,!1,!0],[66,73,!0,!0]],a:[[4,82,!1,!0],[12,82,!1,!0],[20,82,!0,!0],[30,82,!1,!0],[4,69,!1,!0],[12,69,!1,!0],[20,69,!1,!0],[28,69,!1,!0]]},"9,10":{i:[[58,60,!1,!0],[66,60,!0,!0]],a:[[4,56,!1,!0],[12,56,!1,!0],[20,56,!1,!0],[28,56,!1,!0],[4,43,!1,!0],[12,43,!1,!0],[20,43,!1,!0],[28,43,!1,!0]]},10:{i:[[58,47,!1,!0],[66,47,!0,!0]],a:[[4,30,!1,!0],[12,30,!1,!0],[20,30,!1,!0],[28,30,!1,!0],[4,17,!1,!0],[12,17,!1,!0],[20,17,!1,!0],[28,17,!1,!0],[4,4,!0,!0],[14,4,!1,!0],[22,4,!0,!0]]},"10,11":{i:[],a:[]},11:{i:[],a:[]},"11,12":{i:[],a:[]},12:{i:[],a:[]},"12,1":{i:[],a:[]}},y;function _(t,e){let l=e[2]?10:8,n=e[3]?l:6,r=e[3]?6:l;t.fillRect(e[0],e[1],n,r),t.strokeRect(e[0],e[1],n,r)}function we(t,e,l){let o=Math.max(I,H);t.fillStyle=N,t.moveTo(111,75),t.beginPath(),t.arc(111,75,o,e-Math.PI/2,l-Math.PI/2,!1),t.lineTo(111,75),t.fill(),t.closePath()}function ee(t){y=Math.max(Math.min(window.innerWidth*.9/I,3),2);let e=t.getContext("2d");e.canvas.width=y*I,e.canvas.height=y*H,e.scale(y,y),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S,e.strokeRect(2,2,I-4,H-4),e.strokeRect(78,42,66,66),e.fillText("L1",30,20),e.fillText("L2",80,20),e.fillText("MS",180,20),e.lineWidth=1,e.fillStyle=w,e.strokeStyle=k;for(let l of Object.values(B))for(let n of Object.values(l))for(let r of n)_(e,r)}function ke(t,e,l,n,r,o){let s=Math.max(l-t,0,t-(l+r)),u=Math.max(n-e,0,e-(n+o));return Math.sqrt(s*s+u*u)}function xe(t,e){let l=1/0,n=null;for(let[r,o]of Object.entries(B))for(let[s,u]of Object.entries(o))for(let d of u){let h=ke(t/y,e/y,d[0],d[1],d[2]?10:8,d[2]?6:8);h<l&&(l=h,n={angle:r,ring:s})}return l<20?n:{angle:null,ring:null}}function Le(t,e){if(ee(t),e===null)return;let l=t.getContext("2d");if(e.angle===null)return;let n=2*Math.PI/24,r=parseInt(e.angle.split(",")[0],10)%12*2;e.angle.includes(",")&&(r+=1),we(l,(r-.5)*n,(r+1-.5)*n),l.fillStyle=x,l.strokeStyle=L;let o=[];if(e.ring!==null)o.push(...B[e.angle][e.ring.toLowerCase()]);else if(e.angle!==null)for(let s of Object.values(B[e.angle]))o.push(...s);for(let s of o)_(l,s)}function Te(t){return t===null?null:["M\xFCK",t.angle,t.ring===null?null:t.ring.toLowerCase()]}function Se(t){if(t===null)return null;if(t.angle===null)return[F,null,null];let e=t.angle.split(","),l=`${e.length===2?`zwischen ${e[0]} und ${e[1]}`:t.angle} Uhr`;if(t.ring===null)return[F,l,null];let n=t.ring.toLowerCase()==="i"?"innerer Ring":"\xE4u\xDFerer Ring";return[F,l,n]}var X={};v(X,{displayComponents:()=>Oe,draw:()=>re,explain:()=>$e,groups:()=>Me,highlightLocation:()=>ve,key:()=>U,locationFromCoordinates:()=>Be,name:()=>te,regex:()=>Ee});var te="Mensa Gro\xDFer Speisesaal",U="ms",Ee=/^MS(([1-9])([a-d]))?$/i,Me={row:2,column:3},E=154,K=334,c={};function Fe(){let t=["8","8","7","7","7","6","6","5","5","5","4","4","4","3","3","3","2","2"],e=["a","b","c","d"];for(let l=0;l<18;l+=1){let n=54+13*l+1;for(let r=0;r<4;r+=1){let o=t[l],s=e[r];if(c[o]===void 0&&(c[o]={}),c[o][s]===void 0&&(c[o][s]=[]),!(l===6&&r>0))switch(r){case 0:c[o][s].push([4,n,!0],[16,n,!1]);break;case 1:c[o][s].push([40,n,!0],[52,n,!0]);break;case 2:c[o][s].push([80,n,!0],[92,n,!0]);break;case 3:c[o][s].push([120,n,!1],[128,n,!1]);break;default:break}}}}Fe();var b;function le(t,e){let l=e[2]?12:8,n=6;t.fillRect(e[0],e[1],l,n),t.strokeRect(e[0],e[1],l,n)}function ne(t,e,l){let n=4+36*l+12+2,r=4+3*12*(8-e)+12+2;t.fillRect(n,r,10,10)}function re(t){b=Math.max(Math.min(window.innerHeight*.8/K,3),2);let e=t.getContext("2d");e.canvas.width=b*E,e.canvas.height=b*K,e.scale(b,b),e.lineWidth=2,e.strokeStyle=T,e.fillStyle=g,e.font=S,e.strokeRect(2,2,E-4,K-4),e.fillText("SB",70,20),e.fillText("M\xFCK",7,25),e.textAlign="center",e.fillText("L3",3+3.5*((E-6)/4),325),e.fillText("L4",3+2.5*((E-6)/4),325),e.fillText("L5",3+1.5*((E-6)/4),325),e.fillText("L6",3+.5*((E-6)/4),325),e.lineWidth=1,e.fillStyle=w,e.strokeStyle=k;for(let l of Object.values(c))for(let n of Object.values(l))for(let r of n)le(e,r);e.fillStyle=V,e.lineWidth=0;for(let l=0;l<9;l+=1)for(let n=0;n<4;n+=1)ne(e,l,n)}function Ie(t,e,l,n,r,o){let s=Math.max(l-t,0,t-(l+r)),u=Math.max(n-e,0,e-(n+o));return Math.sqrt(s*s+u*u)}function Be(t,e){let l=1/0,n=null;for(let[r,o]of Object.entries(c))for(let[s,u]of Object.entries(o))for(let d of u){let h=Ie(t/b,e/b,d[0],d[1],d[2]?12:8,6);h<l&&(l=h,n={row:r,column:s})}return l<20?n:{row:null,column:null}}function ve(t,e){if(re(t),e===null)return;let l=t.getContext("2d");if(e.row===null||e.column===null)return;l.fillStyle=x,l.strokeStyle=L;let n=[];if(e.row!==null&&e.column!==null)n.push(...c[e.row][e.column.toLowerCase()]);else if(e.row!==null)for(let r of Object.keys(c[e.row]))n.push(...c[e.row][r]);else if(e.column!==null)for(let r of Object.keys(c))n.push(...c[r][e.column.toLowerCase()]);for(let r of n)le(l,r);l.shadowColor=O,l.shadowBlur=15,l.fillStyle=O,ne(l,parseInt(e.row,10)-1,e.column.toLowerCase().charCodeAt(0)-97)}function Oe(t){return t===null?null:["MS",t.row,t.column]}function $e(t){if(t===null)return null;let e=t.column===null?null:`Lampenspalte ${t.column.toUpperCase()}`,l=t.row===null?null:`Lampenreihe ${t.row}`;return[te,l,e]}var p={};p[W]=G;p[D]=A;p[U]=X;var se=navigator.share&&navigator.canShare({title:"IGGG",text:"\u2026",url:"https://team-gecko.de"});function Y(t,e){let l=document.getElementById("location-code"),n=document.getElementById("location-code-explanation"),r=document.getElementById("copy-btn"),o=document.getElementById("share-btn");if(t===null){window.location.hash="",l.innerHTML="\u2026",n.innerHTML="&nbsp;",r.style.display="none",o.style.display="none";return}r.style.display="inline-block",o.style.display=se?"inline-block":"none",l.innerHTML="",n.innerHTML="";for(let[s,u]of t.entries()){let d=document.createElement("span");if(d.textContent=u,d.title=e[s],l.appendChild(d),e[s]!==null){let h=document.createElement("span");h.textContent=e[s],n.appendChild(h)}}window.location.hash=l.innerText.toLowerCase()}function q(t){function e(r){document.getElementById(`map-${r}`).style.display="none",document.getElementById(`map-selector-${r}`).classList.remove("selected")}if(t===null){Y(null,null);for(let r of Object.values(p))e(r.key);return}for(let r of Object.values(p))r.key!==t.key&&e(r.key);let l=document.getElementById(`map-${t.key}`);l.style.display="block";let n=p[t.key];n.highlightLocation(l,t.location),Y(n.displayComponents(t.location),n.explain(t.location)),document.getElementById(`map-selector-${t.key}`).classList.add("selected")}function z(t){for(let[e,l]of Object.entries(p)){let n=l.regex.exec(t.replace(/\s+/g,""));if(n===null)continue;let r={key:e,location:{}};for(let[o,s]of Object.entries(l.groups))r.location[o]=n[s]?n[s]:null;return r}return null}function je(){let t=document.getElementById("canvas-wrapper"),e=document.getElementById("map-selector");for(let[l,n]of Object.entries(p)){let r=document.createElement("canvas");r.id=`map-${l}`,t.appendChild(r);let o=document.createElement("span");o.textContent=n.name,o.id=`map-selector-${l}`,o.addEventListener("click",()=>{q(z(l)),document.getElementById("location-code").scrollIntoView()}),e.appendChild(o),n.draw(r),r.addEventListener("click",s=>{let u=n.locationFromCoordinates(s.offsetX,s.offsetY);n.highlightLocation(r,u),Y(n.displayComponents(u),n.explain(u))})}}function ae(){let t=window.decodeURIComponent(window.location.hash.slice(1));q(z(t))}function Re(){window.addEventListener("hashchange",()=>{ae()})}function Pe(){let t=document.getElementById("location-code");t.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),t.blur())}),t.addEventListener("focus",()=>{t.innerText==="\u2026"&&(t.innerText="")}),t.addEventListener("blur",()=>{q(z(t.innerText)),t.innerText.trim()===""&&(t.innerHTML="\u2026")})}function We(){document.getElementById("copy-btn").addEventListener("click",()=>{let t=document.getElementById("location-code").innerText;navigator.clipboard.writeText(t)})}function Ce(){let t=document.getElementById("share-btn");if(!se){t.style.display="none";return}t.addEventListener("click",()=>{let e=document.getElementById("location-code").innerText,l=window.location.href,n={title:"IGGG",text:e,url:l};navigator.canShare(n)?navigator.share(n):navigator.clipboard.writeText(`${e} \u2014 ${l}`)})}function oe(){je(),ae(),Re(),Pe(),We(),Ce(),window.addEventListener("resize",()=>{for(let[t,e]of Object.entries(p)){let l=document.getElementById(`map-${t}`);e.draw(l)}})}document.readyState!=="loading"?oe():window.addEventListener("DOMContentLoaded",()=>{oe()});})();
